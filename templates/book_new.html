{% extends "base.html" %}

{% block title %}新規登録 - 図書管理システム{% endblock %}

{% block content %}
<div class="container">
    <h1>新しい本を登録</h1>
    
    {% if error %}
        <div class="alert alert-error">{{ error }}</div>
    {% endif %}

    <form method="post" class="book-form">
        <div class="form-group">
            <label for="title">タイトル *</label>
            <input type="text" id="title" name="title" value="{{ title or '' }}" required>
        </div>
        
        <div class="form-group">
            <label for="author">著者 *</label>
            <input type="text" id="author" name="author" value="{{ author or '' }}" required>
        </div>
        
        <div class="form-group">
            <label for="description">概要・説明</label>
            <textarea id="description" name="description" rows="4" placeholder="本の内容や特徴を記述してください">{{ description or '' }}</textarea>
        </div>
        
        <div class="form-group">
            <label for="genre_id">ジャンル</label>
            <select id="genre_id" name="genre_id">
                <option value="">ジャンルを選択してください</option>
                {% for genre in genres %}
                    <option value="{{ genre.id }}" 
                            {% if genre_id and genre_id|string == genre.id|string %}selected{% endif %}>
                        {% if genre.level == 1 %}{{ genre.name }}
                        {% elif genre.level == 2 %}&nbsp;&nbsp;&nbsp;&nbsp;├ {{ genre.name }}
                        {% elif genre.level == 3 %}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└ {{ genre.name }}
                        {% endif %}
                    </option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="isbn">ISBN</label>
                <input type="text" id="isbn" name="isbn" value="{{ isbn or '' }}" placeholder="978-4-123456-78-9">
            </div>
            
            <div class="form-group">
                <label for="publisher">出版社</label>
                <input type="text" id="publisher" name="publisher" value="{{ publisher or '' }}">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="publication_year">出版年</label>
                <input type="number" id="publication_year" name="publication_year" value="{{ publication_year or '' }}" min="1000" max="2030">
            </div>
            
            <div class="form-group">
                <label for="pages">ページ数</label>
                <input type="number" id="pages" name="pages" value="{{ pages or '' }}" min="1">
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">登録</button>
            <a href="/books" class="btn btn-secondary">キャンセル</a>
        </div>
    </form>
</div>
{% endblock %}